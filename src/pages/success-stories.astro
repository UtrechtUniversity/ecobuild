---
import Layout from '../layouts/Layout.astro';

interface Persona {
  id: string;
  name: string;
  roles: string[];
}

const personas: Persona[] = [
  {
    id: 'developer',
    name: 'Building Developer',
    roles: ['Architect', 'Engineer', 'Sustainability consultant', 'Constructor', 'Designer']
  },
  {
    id: 'policymaker',
    name: 'Policy Maker',
    roles: ['Policy officer/advisor', 'Inspectors', 'Permit Issuer']
  },
  {
    id: 'researcher',
    name: 'Researcher',
    roles: ['Environmental Scientist / Ecologist', 'Social scientist', 'Economic scientist', 'Construction / building scientist', 'Governance and policy scientist']
  }
];

const allRoles = [
  'Architect',
  'Engineer',
  'Sustainability consultant',
  'Constructor',
  'Designer',
  'Policy officer/advisor',
  'Inspectors',
  'Permit Issuer',
  'Environmental Scientist / Ecologist',
  'Social scientist',
  'Economic scientist',
  'Construction / building scientist',
  'Governance and policy scientist'
];
---

<Layout title="Success Stories">
  <div class="max-w-7xl mx-auto px-4 py-12 sm:py-20">
    <!-- Header -->
    <div class="max-w-3xl mx-auto text-center mb-16">
      <h1 class="text-4xl font-bold text-gray-900 mb-4">Success Stories</h1>
      <p class="text-lg text-gray-600">
        Explore the personas and professional roles contributing to sustainable building design and research.
      </p>
    </div>

    <!-- Interactive Journey Diagram -->
    <div class="mb-20">    
        <!-- Personas Section -->
        <div>
          <h3 class="text-lg font-semibold text-gray-700 mb-4 pl-4 border-l-4 border-gray-200">Core Personas</h3>
          <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
            {personas.map((persona) => (
              <div class="bg-white border border-gray-100 p-6 rounded-xl shadow-sm hover:shadow-md transition">
                <h4 class="font-semibold text-gray-800">{persona.name}</h4>
                <p class="text-sm text-gray-600 mt-2">
                  {persona.roles.length} associated role{persona.roles.length !== 1 ? 's' : ''}
                </p>
              </div>
            ))}
          </div>
        </div>

        <!-- Arrow Indicator -->
        <div class="flex justify-center">
          <div class="text-gray-400 text-2xl">â†“</div>
        </div>

        <!-- Roles Section -->
        <div>
          <h3 class="text-lg font-semibold text-gray-700 mb-4 pl-4 border-l-4 border-gray-200">Professional Roles</h3>
          <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
            {allRoles.map((role) => (
              <div class="relative group">
                <div class="bg-white p-4 rounded-lg transition-shadow border border-gray-100 shadow-sm hover:shadow-md">
                  <p class="text-sm font-medium text-gray-800">{role}</p>
                </div>

                <!-- Hover popover (CSS only, hidden on small screens) -->
                <div class="absolute left-1/2 transform -translate-x-1/2 mt-2 w-72 bg-white border border-gray-200 shadow-lg rounded-lg p-3 text-sm text-gray-600 opacity-0 scale-95 group-hover:opacity-100 group-hover:scale-100 pointer-events-auto transition-all z-50 hidden sm:block">
                  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec odio. Praesent libero. Sed cursus ante dapibus diam.</p>
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>

    <!-- Detailed Persona Cards -->
    <div class="mt-20">
      <h2 class="text-2xl font-bold text-gray-900 mb-12 text-center">Stakeholder Personas</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        {personas.map((persona) => (
            <div class="bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-shadow overflow-hidden">
            <div class="bg-gray-50 p-6 border-b border-gray-200">
              <h3 class="text-xl font-bold text-gray-900">{persona.name}</h3>
            </div>
            <div class="p-6">
              <p class="text-sm font-semibold text-gray-600 mb-4 uppercase tracking-wide">Associated Roles</p>
              <div class="space-y-2">
                {persona.roles.map((role) => (
                  <div class="flex items-center gap-2 text-gray-700">
                    <span class="w-2 h-2 bg-gray-400 rounded-full"></span>
                    <span class="text-sm">{role}</span>
                  </div>
                ))}
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>

    <!-- Information Section -->
    <div class="mt-20 bg-gray-50 rounded-xl p-8 border border-gray-200">
      <h3 class="text-xl font-bold text-gray-900 mb-4">About This Framework</h3>
      <p class="text-gray-700 leading-relaxed">
        This success stories framework maps three core personas to various professional roles in the sustainable building sector. 
        Each persona represents a different stakeholder group, from building developers to policy makers and researchers, 
        each with specific expertise and responsibilities in advancing sustainable design and practice.
      </p>
    </div>
  </div>
</Layout>